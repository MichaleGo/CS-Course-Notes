第6章   设备管理
1	I/O设备通常大致可分为哪两大类？各自传输的信息单位有什么特点？
字符设备：人机交互设备。是以字符为单位发送和接收数据的，通信速度比较慢。键盘和显示器、鼠标、扫描仪、打印机等。
块设备：外部存储器。以块为单位传输数据。常见块尺寸：512B～32KB。如磁盘、磁带、光盘等。
网络通信设备：网卡，调制解调器。
时钟：

I/O体系结构：图6.1必背诵	P125
I/O设备一般由机械和电子两部分构成，机械是设备本身，电子部分是设备控制器，设备控制器主要有两个作用：
①	解释从IO接口接收到的高级命令，强制设备执行特定的操作
②	转换和解释从设备接受电信号，修改状态寄存器
设备控制器包括：状态寄存器、控制寄存器、数据缓冲寄存器

2	常用的四种数据传输方式。
程序查询（polling）方式：CPU忙等，串行工作。
中断（interrupt）方式：CPU/设备并行工作，使用最多。
直接存储器访问(DMA)方式：通常，CPU控制地址总线，与主存交换数据，DMA控制器取代CPU，接管地址总线的控制权，直接					控制内部数据缓冲区与主存之间的数据交换。整块数据的传输是在DMA控制下完成的。仅在开始和结				束时才需CPU干预。
通道控制方式：是一种专用的I/O处理机，一个通道控制多台设备，进一步减轻CPU的负担。CPU、通道和I/O设备并行工作。

DMA工作流程：CPU——（DMA命令块 源、目的、n）——主存——DMA控制器——挪用CPU工作周期传送一个字节的数据（恢复CPU对主存的控制权）——主存地址寄存器加1字节个数减1
通道的类型：字节多路通道（分时执行多个通道程序，字节传输慢速设备）、选择通道（一个通道程序，一台设备传输，快）、数组多路通道（快且分时，先为一台执行再为另一台设备执行一条通道指令）

3	根据设备的使用方式，设备被分为几种类型？何为虚拟设备？它是通过什么技术实现的？
虚拟设备，共享设备，独占设备。
虚拟设备：是指设备本身是独占设备，而经过虚拟技术处理，可以把它改造成共享设备，供多个进程同时使用。常用可共享的高速设备来模拟独占的慢速设备。能有效提高独占型设备的利用率。 Spooling技术（缓输出技术）是实现虚拟设备的具体技术。它利用可共享磁盘的一部分空间，模拟独占的输入/输出设备。以空间换时间
4	按照设备管理的层次结构，I/O软件划分为几层？各层主要实现哪些功能？ 
1.中断处理程序  ①进程在启动一个I/O操作后阻塞起来，I/O操作完成，控制器产生一个中断。②CPU响应中断，执行中断处理程序。③检查设备状态。若正常完成，就唤醒等待的进程。然后检查是否还有待处理的I/O请求，若有就启动。若传输出错，再发启动命令重新传输；或向上层报告“设备错误”的信息。④中断返回被中断的进程，或转进程调度。
2.设备驱动程序  每个设备驱动程序处理一种类型设备。由一些与设备密切相关的代码组成。提供一些与文件类似的API：open, close, read, write, control等。是OS中唯一知道设备控制器的配置情况，如设置有多少个寄存器以及这些寄存器作用。 通常包含三部分功能：①设备初始化。②启动设备传输数据的例程。③中断处理例程。
3.独立于设备的软件  （1）实现所有设备都需要的功能，且向用户提供一个统一的接口。（2）设备命名设备的符号名映射到正确的设备驱动程序。（3）设备保护。（4）提供与设备无关的块尺寸。（5）缓冲技术（单双多缓冲 缓冲池）。（6）负责设备分配和调度（静态、动态分配、虚拟设备）。（7）出错处理。
4.用户空间的I/O软件（I/O库函数、 Spooling技术）
5	何为设备的独立性？
（设备独立性是指用户及用户程序不受系统配置的设备类型和设备台号的影响。用户只是使用逻辑设备，具体的映射由操作系统完成。）
同步异步IO：
6   什么是SPOOLING技术？以输出为例，说明它的实现原理。
是实现虚拟设备的具体技术/。它利用可共享磁盘的一部分空间，模拟独占的输入/输出设备。以空间换时间。
Spooling实际是一种缓冲技术。进程要打印时，系统并不为它分配打印机，而是把待打印的数据缓冲到一个独立的磁盘文件上，形成待打印文件队列。之后，Spooling系统一次一个地将打印队列上的文件送打印机打印。这种技术又叫缓输出技术。
 7   一个特定磁盘上的信息如何进行编址？
盘面号、磁道号 和扇区号（或柱面号、磁头号和扇区号）。
8   要将磁盘上一个块的信息传输到主存需要系统花费哪些时间？（计算题）
（寻道时间、旋转延迟时间和读/写传输时间）
9	常用的磁盘调度算法：
先来先服务：最简单，易实现，又公平合理。
最短寻道时间优先：在将磁头移向下一请求磁道时，总是选择移动距离最小的磁道。
扫描法：读/写磁头在由磁盘的一端向另一端移动时，随时处理所到达磁道上的服务请求。（SCAN：扫描（电梯法）、C-SCAN：循环扫描、LOOK：查询、C-LOOK：循环查询）
